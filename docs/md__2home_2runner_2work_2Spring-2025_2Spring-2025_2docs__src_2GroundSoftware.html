<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASCEND Flight Software: Ground Station Software</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ASCEND Flight Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Ground Station Software</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a>(Not included in the Doxygen)</p>
<p>Source Code can be found here: <a href="https://github.com/ASU-ASCEND/Spring-2025/tree/main/GroundStation/Groundstation">https://github.com/ASU-ASCEND/Spring-2025/tree/main/GroundStation/Groundstation</a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Ground Station Data Flow</h1>
<p><img src="images/Ground Software Organization.png" alt="Ground Station Organization" width="100%" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Some Notes on Using the Ground Station</h1>
<p>(This information is also available <a href="https://github.com/ASU-ASCEND/Spring-2025/blob/main/GroundStation/Groundstation/README.md">here</a>)</p>
<p>Before doing these steps make sure you have the most recent ground station software by running <code>git pull</code> somewhere in your local repo for the project (for example the folder that this README is in). All of the commands given in these instructions should be executed from the the folder <a href="https://github.com/ASU-ASCEND/Spring-2025/tree/main/GroundStation/Groundstation">/GroundStation/GroundStation</a>. <br  />
 </p>
<h3><a class="anchor" id="autotoc_md3"></a>
Starting it up</h3>
<p>The first time you run the ground station on a computer you need to either set up the .venv (see Development: Using venv) or install the dependencies onto your machine directly. Using venv is preferred, and you'll need to do Step 2 each time you start a new terminal.</p>
<p>After venv is set up you should see a <code>(.venv)</code> somewhere in the prompt the terminal you are using to indicate that the virtual environment is active.</p>
<p>Then to run the ground station software use: </p><div class="fragment"><div class="line">python main.py</div>
</div><!-- fragment --><p> If you get errors saying a package can't be found try activating the environment again even if it does say <code>(.venv)</code> in your terminal prompt, sometimes the <code>(.venv)</code> is leftover and isn't actually activated.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
After running</h3>
<p>You should see prompt in the terminal for which port to connect to, enter the index of the port for the usb device in the list. And the a prompt for which device to connect to, this is because the radio and pico serial connections use different baud rates so select the device accordingly.</p>
<p>Once in the gui, use the buttons on the top row to switch between operation modes. GSE and Radio are very similar and they should both save what they get to a file in the untracked folder session_data. The difference between the 2 is that Radio will give you packet dropping stats and GSE will give you Core debug messages. The last mode, Data, will let you get flash data off the payload and decode it, and the data we get from the SD Card, which will be saved as a binary as well.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Closing the ground station</h3>
<p>To close the ground station, avoid using CTRL+C in the terminal as this has the danger of orphaning processes. Just close out of the GUI and then if a prompt is still open in the terminal you should be able to just press enter and it'll end the terminal portion of the program as well.</p>
<h4><a class="anchor" id="autotoc_md6"></a>
If you do use CRTL+C or the software crashes</h4>
<p>If the software ends in an unexpected way or is interrupted it might be ok, but it does run the risk of not properly ending all of the processes associated with it. After that happens if you try to start it up again and see a bunch of new errors, they should be able to be fixed by the following:</p><ol type="1">
<li>Make sure the current run is ended/closed using CRTL+C and force quits</li>
<li>Open Task Manager and then search for and end every Python process (there may be some that aren't part of the ground station, especially if you are using VSCode, so if a process immediately reopens it should be fine to leave)</li>
<li>Rerun the software (you may need to restart your venv) <br  />
</li>
</ol>
<h2><a class="anchor" id="autotoc_md7"></a>
Interacting with the RESTful API</h2>
<p>The RESTful API has a single endpoint which can be interacted with via GET and POST. The server is intended to be hosted locally with the url for the single endpoint being: <a href="http://127.0.0.1:5000/dataserver">http://127.0.0.1:5000/dataserver</a></p>
<h3><a class="anchor" id="autotoc_md8"></a>
Adding Data</h3>
<p>The server holds a single dictionary of values with keys set by the field name when it was posted. When the server receives a POST method with a duplicate key the new value replaces the old one. The POST method with then return the count of fields update in json format.</p>
<h4><a class="anchor" id="autotoc_md9"></a>
POST Example Using &lt;tt&gt;curl&lt;/tt&gt;</h4>
<div class="fragment"><div class="line">curl -i -X POST &quot;127.0.0.1:5000/dataserver?f1=1&amp;f2=2&amp;f3=3&quot;</div>
</div><!-- fragment --><p> Results in </p><div class="fragment"><div class="line">HTTP/1.1 200 OK</div>
<div class="line">Server: Werkzeug/3.1.3 Python/3.9.13</div>
<div class="line">Date: Sat, 22 Mar 2025 07:12:51 GMT</div>
<div class="line">Content-Type: application/json</div>
<div class="line">Content-Length: 21</div>
<div class="line">Connection: close</div>
<div class="line"> </div>
<div class="line">{&quot;fields_updated&quot;:3}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md10"></a>
Requesting Data</h3>
<p>When requesting data the GET method takes a list of fields separated by commas and returns those fields corresponding value, if they exist in the dictionary, along with a boolean field called "missing_fields" which is true if at least one fields was not found, in json format.</p>
<h4><a class="anchor" id="autotoc_md11"></a>
GET Example Using &lt;tt&gt;curl&lt;/tt&gt;</h4>
<div class="fragment"><div class="line">curl -i -X GET &quot;127.0.0.1:5000/dataserver?fields=f1,f2,f3,f4,f5&quot;</div>
</div><!-- fragment --><p> Results in </p><div class="fragment"><div class="line">HTTP/1.1 200 OK</div>
<div class="line">Server: Werkzeug/3.1.3 Python/3.9.13</div>
<div class="line">Date: Sat, 22 Mar 2025 07:16:03 GMT</div>
<div class="line">Content-Type: application/json</div>
<div class="line">Content-Length: 51</div>
<div class="line">Connection: close</div>
<div class="line"> </div>
<div class="line">{&quot;f1&quot;:&quot;1&quot;,&quot;f2&quot;:&quot;2&quot;,&quot;f3&quot;:&quot;3&quot;,&quot;missing_fields&quot;:true}</div>
</div><!-- fragment --><p> (Both examples can be called together using the script <a href="/testDataServer.sh">testDataServer.sh</a>)</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Development: Using venv</h2>
<p>Use the provided requirements.txt file to automatically install needed dependencies</p>
<h3><a class="anchor" id="autotoc_md13"></a>
1\. Create a new local virtual environment</h3>
<div class="fragment"><div class="line">python -m venv .venv</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md14"></a>
2\. Activate the new environment</h3>
<h4><a class="anchor" id="autotoc_md15"></a>
Windows:</h4>
<p>In Powershell: </p><div class="fragment"><div class="line">.\.venv\Scripts\Activate.ps1</div>
</div><!-- fragment --><p> In Git Bash: </p><div class="fragment"><div class="line">source .venv/Scripts/activate</div>
</div><!-- fragment --> <h4><a class="anchor" id="autotoc_md16"></a>
Other OS:</h4>
<div class="fragment"><div class="line">source .venv/bin/activate</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17"></a>
3\. Install the requirements.txt</h3>
<div class="fragment"><div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md18"></a>
When done using the ground station software</h3>
<p>Exit the virtual environment with: </p><div class="fragment"><div class="line">deactivate</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
